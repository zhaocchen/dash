<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>zchart</title>
  <style>
  .chart-box {
      width: 600px;
      height: 600px;
  }
  </style>
</head>
<body>
<div id="chartBox" class="chart-box"></div>


<script crossorigin="anonymous" integrity="sha384-i+fXrQ+G3+h2478EWpSpIXivtKbbze+0SNOXJGizkAp6DVG/m2fE6hiWeDwskVvp" src="https://lib.baomitu.com/echarts/4.7.0/echarts.js"></script>
<script>

const chartData = {
    legend: ['女性', '男性'],
    yAxis: ['0-6', '7-17', '18-29', '30-39', '40-49', '50-59', '60-64', '65-69', '70-79', '80-89', '90以上'],
    series: [
        [-50, -60, -101, -134, -190, -230, -210, -110, -100, -30, -12],
        [60, 110, 121, 174, 390, 450, 420, 320, 120, 80, 40],
    ]
}

var myChart = echarts.init(document.getElementById('chartBox'));

const color = [{
                            type: 'linear',
                            x: 0,
                            y: 0,
                            x2: 1,
                            y2: 0,
                            colorStops: [{
                                offset: 0, color: '#2590FE' // 0% 处的颜色
                            }, {
                                offset: 1, color: '#18EAEC' // 100% 处的颜色
                            }],
                            globalCoord: false // 缺省为 false
                        }, {
                            type: 'linear',
                            x: 0,
                            y: 0,
                            x2: 1,
                            y2: 0,
                            colorStops: [{
                                offset: 0, color: '#FAA27F' // 0% 处的颜色
                            }, {
                                offset: 1, color: '#FE7125' // 100% 处的颜色
                            }],
                            globalCoord: false // 缺省为 false
                        }]

const tooltipFormatter = (params) => {
                        if (!params.length) return ''
                        let s = params[0].axisValueLabel + '<br/>'
                        for (const iterator of params) {
                        // 如果是负数则反转
                        let d = iterator.data < 0 ? -iterator.data : iterator.data
                        s += iterator.marker + iterator.seriesName + '：' + d + '<br/>'
                        }
                        return s
                    }


const axisFormatter = (value) => {
                                // 负数取反 显示的就是正数了
                                if (value < 0) return -value
                                else return value
                            }
const seriesoFrmatter = (value) => {
                                // 值都是负数的 所以需要取反一下
                                return -value.data
                            }
var option = {
    color,
    tooltip: {
        trigger: 'axis',
        axisPointer: {            // 坐标轴指示器，坐标轴触发有效
            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        },
        formatter: tooltipFormatter
    },
    legend: {
        data: chartData.legend
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    xAxis: [
        {
            type: 'value',
           axisLabel: axisFormatter
        }
    ],
    yAxis: [
        {
            type: 'category',
            axisTick: {
                show: false
            },
            data: chartData.yAxis
        }
    ],
    series: [
        {
            name: chartData.legend[1],
            type: 'bar',
            stack: '总量',
            label: {
                show: true
            },
            data: chartData.series[1]
        },
        {
            name: chartData.legend[0],
            type: 'bar',
            stack: '总量',
            label: {
                show: true,
                position: 'left',
                formatter: seriesoFrmatter
            },
            data: chartData.series[0]
        }
    ]
};


myChart.setOption(option);
</script>
</body>
</html>